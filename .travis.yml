env:
  global:
    - CC_TEST_REPORTER_ID=e56f2e19260128e344598bc697e0e312e2161e849c661ace6c44774adea698b0
    - SECRET_KEY=pnf0muk%ci3*rqjlqry1w@9iq-k3j^&8l121@12+ds8^&%^+wd
language: python
python: 3.7

branches:
  only:
    - master

before_install:
  - pip install poetry
install:
  - make install

before_script:
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod +x ./cc-test-reporter
  - ./cc-test-reporter before-build
script:
  - make lint
  - make analyze
#   - make test-with-coverage
# after_script:
#   - ./cc-test-reporter format-coverage -d -t coverage.py coverage.xml after-build $TRAVIS_TEST_RESULT
#   - if [[ "$TRAVIS_TEST_RESULT" == 0 ]]; then ./cc-test-reporter upload-coverage; fi

deploy:
  provider: heroku
  app: "alexofechoes-taskmanager"
  api_key:
    secure: rAa/ZQhlx/qt+5fax7ENBDMwYRmuimpd14L63ztjyYUZW4Wl3KyWUXz/f8vjTQARgYfGPuKaW9KLfVc0bMzWrmBRXIMUuaIrjYujvgHsU8B0Ma5B72wiKzNZx/4zCKmtuyHUoLvtpZv5LJS9AERAIxtcD2cJ/qphajv+gwSX02sDLiiT70r6sAKhD8KtW4/QckxazLhBbPcWZOjHl/iwTEBCLtji8YmjDo/AWDhda9L2Lf887jNXteyRG7YzFwCDMsIe41Y9W8MXLWNxBa3gY6OZ7ZghbH0VKjFiN7YQmPVxqZd65AprbeETjiUvMiljDfR/07kHCzEmRWV6kY0/VK5YBQJGBYVs9GR3GD4VvEqbzAzTIzXZNnNaQGTlMchY1ApZkKbjSYopx89wmsoES5AfUb55PIqa9iQlpkZSRLsU9qG1VkAjcq5fHx1gPwQyX4hJSwSjqW0IcAjhidVwoOM+KLaUojVPc5KTMyuQwOA/lM60PVtPN2KNyStMjIbOTFmn8B/3BARbDstXnYZ8BGvQfiHYRlCx+YiaHb3kdV8dNCnkehUi2JOSZ958JzF00CRgN6PLHGqQILuC+kRz+dX11Tzug0XH9NHaV+S3l0XGa6REOXICDkxpSm+gIeMRAE6Ndc8JHelYIYqZHhKlxCANpsColt6PHCQ++sFeZa4=
